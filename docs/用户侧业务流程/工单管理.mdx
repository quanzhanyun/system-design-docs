# 工单管理

首页列出用户最新的20条工单。

如果用户的工单有新的进度，须通过邮件或短信通知用户。

## 实现说明

User 侧的工单管理功能需与 Admin 侧的工单处理功能配合使用。

所有工单数据存放于 User 侧的数据库中，每条数据都保存一个 agentId 字段用于关联 Admin 侧的客服。在 Admin 侧，客服负责对工单进行回复，管理员有权分配及重新分配工单给指定的客服。

在技术实现上，用户提交工单后存入数据库，之后触发 Strapi 向消息队列添加消息，如果 Ticket 表中已经分配了 agentId，则将消息发送给 Admin 侧的指定客服，如果没有分配 agentId，则不向消息队列添加消息。

在 Admin 侧，管理员将用户提交的工单分配给指定客服，然后客服在后台就能看到新分配的工单；用户也能在后台看到工单分配的客服。

在 Admin 侧需要实现一个回调地址，用于接收 User 侧传递过来的消息并发送给指定的客服。

在 User 侧需要实现一个回调地址，用于接收客服发送来的消息并入库，之后由 strapi 触发向消息队列添加消息的操作。

## 提交工单

提交新工单。包括：

- 标题
- 详情
- 类型
- 分类

## 处理工单

可回复、关闭工单。